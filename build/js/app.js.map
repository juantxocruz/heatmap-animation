{"version":3,"file":"./js/app.js","mappings":"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","sources":["webpack://webpack-starter/webpack/runtime/chunk loaded","webpack://webpack-starter/./src/scripts/globals.service.ts","webpack://webpack-starter/./src/scripts/animation-player.ts","webpack://webpack-starter/./src/scripts/heatmap.service.ts","webpack://webpack-starter/./src/scripts/index.ts","webpack://webpack-starter/./src/scripts/reshape.service.ts","webpack://webpack-starter/webpack/bootstrap","webpack://webpack-starter/webpack/runtime/compat get default export","webpack://webpack-starter/webpack/runtime/define property getters","webpack://webpack-starter/webpack/runtime/hasOwnProperty shorthand","webpack://webpack-starter/webpack/runtime/publicPath","webpack://webpack-starter/webpack/runtime/jsonp chunk loading","webpack://webpack-starter/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","\nexport const getJSON = (url: string, callback: any): void => {\n    let xhr = new XMLHttpRequest();\n    xhr.open('GET', url, true);\n    xhr.responseType = 'json';\n    xhr.onload = () => {\n        let status = xhr.status;\n        if (status === 200) {\n            callback(null, xhr.response);\n        } else {\n            callback(status, xhr.response);\n        }\n    };\n    xhr.send();\n};\n\n\n\nexport const choices_days = [[0, \"Sunday\"], [1, \"Monday\"], [2, \"Tuesday\"], [3, \"Wednesday\"], [4, \"Thursday\"], [5, \"Friday\"], [6, \"Saturday\"]];\n\nexport const choices_hours = [\n    [0, \"6AM\", 6],\n    [1, \"7AM\", 7],\n    [2, \"8AM\", 8],\n    [3, \"9AM\", 9],\n    [4, \"10AM\", 10],\n    [5, \"11AM\", 11],\n    [6, \"12PM\", 12],\n    [7, \"1PM\", 13],\n    [8, \"2PM\", 14],\n    [9, \"3PM\", 15],\n    [10, \"4PM\", 16],\n    [11, \"5PM\", 17],\n    [12, \"6PM\", 18],\n    [13, \"7PM\", 19],\n    [14, \"8PM\", 20],\n    [15, \"9PM\", 21],\n    [16, \"10PM\", 22],\n    [17, \"11PM\", 23],\n    [18, \"12AM\", 0],\n    [19, \"1AM\", 1],\n    [20, \"2AM\", 2],\n    [21, \"3AM\", 3],\n    [22, \"4AM\", 4],\n    [23, \"5AM\", 5]\n];\n\n\nexport function hour2index(hour: number): number {\n    let index: number;\n\n    if (hour >= 6 && hour <= 23) {\n        index = hour - 6\n    } else {\n        index = hour + 18\n    }\n    // console.log(hour, index)\n\n    return index;\n}\n\n\nexport let dayTimeWindow = {\n    \"day_window\": \"Monday 6AM until Tuesday 5AM\",\n    \"day_window_end_int\": 1,\n    \"day_window_end_txt\": \"Tuesday\",\n    \"day_window_start_int\": 0,\n    \"day_window_start_txt\": \"Monday\",\n    \"time_local\": 7,\n    \"time_local_12\": \"7AM\",\n    \"time_local_index\": 1,\n    \"time_window_end\": 5,\n    \"time_window_end_12h\": \"5AM\",\n    \"time_window_end_ix\": 23,\n    \"time_window_start\": 6,\n    \"time_window_start_12h\": \"6AM\",\n    \"time_window_start_ix\": 0\n};","\nimport { choices_days, choices_hours } from './globals.service';\nexport class AnimationPlayer {\n\n    choices_days = choices_days;\n    choices_hours = choices_hours\n    public currentFrame: number = 0;\n    private heatmapData3: any;\n\n    public heatmap: any;\n    public data: any;\n    public interval: any;\n    public animationSpeed: number;\n    public readonly wrapperEl: any;\n    public playButton: any;\n    public isPlaying: boolean;\n    public dayTimeWindow: any;\n\n    constructor(\n        public obj: {\n            heatmap: any,\n            data: any,\n            interval: any,\n            animationSpeed: number,\n            wrapperEl: any,\n            playButton: any,\n            isPlaying: boolean,\n            dayTimeWindow: any\n        }\n    ) {\n        this.heatmap = obj.heatmap;\n        this.data = obj.data;\n        this.interval = obj.interval;\n        this.animationSpeed = obj.animationSpeed || 500;\n        this.wrapperEl = obj.wrapperEl;\n        this.playButton = obj.playButton;\n        this.isPlaying = obj.isPlaying;\n        this.dayTimeWindow = obj.dayTimeWindow\n\n        this.stop();\n        this.init();\n    }\n\n    init() {\n        let dataLen = this.data.length;\n        let frame;\n        this.wrapperEl.innerHTML = '';\n\n        this.playButton = this.playButton ? this.playButton : document.createElement('button');\n\n        this.playButton.onclick = () => {\n            if (this.isPlaying) {\n                this.stop();\n            } else {\n                this.play();\n            }\n            this.isPlaying = !this.isPlaying;\n        };\n        this.playButton.innerText = 'play';\n\n        this.wrapperEl.appendChild(this.playButton);\n\n        let events = document.createElement('div');\n        events.className = 'heatmap-timeline';\n        events.innerHTML = '<div class=\"line\"></div>';\n\n\n        for (let i = 0; i < this.data.length; i++) {\n\n            // Generate timeline points\n\n            var xOffset = 100 / (dataLen - 1) * i;\n\n            var ev = document.createElement('div');\n            ev.className = 'time-point';\n            ev.style.left = xOffset + '%';\n            ev.onclick = (function (i: number) {\n                return function () {\n                    this.isPlaying = false;\n                    this.stop();\n                    this.setFrame(i);\n                }.bind(this);\n            }.bind(this))(i);\n\n\n            events.appendChild(ev);\n\n        }\n        this.wrapperEl.appendChild(events);\n\n        // check if time_local_index is in user set hour_min/ max range.\n        if (this.dayTimeWindow['time_local_index'] >= this.dayTimeWindow['time_window_start_ix'] && this.dayTimeWindow['time_local_index'] <= this.dayTimeWindow['time_window_end_ix']) {\n            // local venue time is within hour_min/max range so setting the animation frame to venue current local hour.\n            // The local hour index needs to be subtracted with the time window start index, since the local hour index is based\n            // on an array from 0 to 23. \n            frame = this.dayTimeWindow['time_local_index'] - this.dayTimeWindow['time_window_start_ix'];\n        } else {\n            // local vanue time is outside range, so setting the frame to the hour_min value\n            // The local hour index needs to be subtracted with the time window start index, since the local hour index is based\n            // on an array from 0 to 23. \n\n            frame = this.dayTimeWindow['time_window_start_ix'] - this.dayTimeWindow['time_window_start_ix'];\n        }\n\n        this.setFrame(frame);\n\n    };\n\n    public play() {\n        // Only play when Live/ Now mode not enabled\n        let dataLen = this.data.length;\n\n        this.playButton.innerText = 'pause';\n        this.interval = setInterval(() => {\n            this.setFrame(++this.currentFrame % dataLen);\n        }, this.animationSpeed);\n\n    };\n\n    public stop() {\n        clearInterval(this.interval);\n        if (this.playButton) this.playButton.innerText = 'play';\n    };\n\n    public setFrame(frame: number) {\n        // console.log(\"frame \" + frame);\n        this.currentFrame = frame;\n        var snapshot = this.data[frame];\n        // this.heatmap.setData(snapshot);\n        this.heatmapData3 = {\n            max: 100,\n            data: snapshot\n        };\n        this.heatmap.setData(this.heatmapData3);\n\n        let timePoints = document.querySelectorAll('.heatmap-timeline .time-point');\n        for (let i = 0; i < timePoints.length; i++) {\n            timePoints[i].classList.remove('active');\n            timePoints[i].innerHTML = \"\";\n        }\n\n        timePoints[0].innerHTML = '<div style=\"margin-top:12px; color:#a7a7a7;font-size:11px\">' + this.dayTimeWindow['time_window_start_12h'] + '</div>';\n        timePoints[this.data.length - 1].innerHTML = '<div style=\"margin-top:12px;color:#a7a7a7;font-size:11px\">' + this.dayTimeWindow['time_window_end_12h'] + '</div>';\n\n        timePoints[frame].classList.add('active');\n        timePoints[frame].innerHTML = '<div style=\"margin-top:12px; color:#7367F0;font-size:11px\">' + this.choices_hours[frame + this.dayTimeWindow['time_window_start_ix']][1]; + '</div>';\n\n    };\n\n    public setAnimationData(data: any) {\n        this.isPlaying = false;\n        this.stop();\n        this.data = data;\n        this.init();\n    };\n    public setAnimationSpeed(speed: number) {\n        this.isPlaying = false;\n        this.stop();\n        this.animationSpeed = speed;\n    }\n\n}","\n// Heatmap config\nexport const heatmap_config: any = {\n    // radius should be small ONLY if scaleRadius is true (or small radius is intended)\n    \"radius\": 20,\n    \"maxOpacity\": 0.6,// 0.6,\n    \"minOpacity\": 0.3,//0.4,\n    \"blur\": 1,\n    // scales the radius based on map zoom\n    \"scaleRadius\": false,\n    // backhround color for whole heatmap layer\n    //backgroundColor: '#13ae4778',\n    // custom gradient colors\n    gradient: {\n        // enter n keys between 0 and 1 here\n        // for gradient color customization\n        '0.0': 'green',\n        '0.5': 'orange',\n        '0.8': 'red'\n    },\n    // if set to false the heatmap uses the global maximum for colorization\n    // if activated: uses the data maximum within the current map boundaries \n    //   (there will always be a red spot with useLocalExtremas true)\n    \"useLocalExtrema\": false,\n    // which field name in your data represents the latitude - default \"lat\"\n    latField: 'lat',\n    // which field name in your data represents the longitude - default \"lng\"\n    lngField: 'lng',\n    // which field name in your data represents the data value - default \"value\"\n    valueField: 'count'\n};\n\n","import * as L from 'leaflet';\nimport HeatmapOverlay from 'leaflet-heatmap';\nimport { AnimationPlayer } from './animation-player';\nimport { reshapeData, sliceHoursfromData, LatLngCount } from './reshape.service';\nimport { getJSON, choices_days, choices_hours, hour2index, dayTimeWindow } from './globals.service';\nimport { heatmap_config } from './heatmap.service'\nimport 'leaflet/dist/leaflet.css';\nimport '../styles/index.scss';\n\n\nif (process.env.NODE_ENV === 'development') {\n  require('../index.html');\n}\n\n\n// config\n\n\nfunction getConfig() {\n  let url: any = window.location;\n  let location: string = url.href;\n  let directoryPath = location.substring(0, location.lastIndexOf(\"/\") + 1);\n\n  return {\n    url: url,\n    location: location,\n    directoryPath: directoryPath\n\n  }\n}\n\n\n// map\n\nlet map_leaflet: L.Map;\nlet markerIconUrl = \"/img/marker-icon-violet.png\";\n\nconst openStreetMapLayer: L.TileLayer = L.tileLayer(\n  'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n  attribution: 'Map data &copy; <a href=\"https://openstreetmap.org\">OpenStreetMap</a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery © <a href=\"https://cloudmade.com\">CloudMade</a>',\n  maxZoom: 18\n});\nconst arcGisMapLayer: L.TileLayer = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}', {\n  attribution: 'Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community'\n});\nconst basemap = arcGisMapLayer;\nconst defaultCenter: L.LatLngTuple = [40.423686379181405, -3.710858047841252];\nconst defaultZoom: number = 16;\nconst venuemarkers: L.LayerGroup = new L.LayerGroup(); //new Array();\nconst marker: L.Marker = L.marker(defaultCenter);\n\n\nexport function drawMap() {\n  map_leaflet = L.map('map_leaflet', {\n    fullscreenControl: true,\n    center: defaultCenter,\n    zoom: defaultZoom,\n    layers: [basemap, venuemarkers],\n    scrollWheelZoom: false, // disable original zoom function\n    // smoothWheelZoom: true,  // enable smooth zoom\n    // smoothSensitivity: 1,   // zoom speed. default is 1\n    //leaflet buildin fractional zoom\n    // scrollWheelZoom: true, // disable original zoom function\n    // zoomSnap: 0.1\n  });\n\n  marker.addTo(map_leaflet);\n}\n\nlet heatmapLayer: any;\n\n\n\nlet poisData: any; // original pois \nlet venuesData: Array<any> = []; // all raw venues (pois) 7 days, 24 hours\nlet player: any;\n\n\n// map move extends \nlet timerId: any;\n// Throttle function: Input as function which needs to be throttled and delay is the time interval in milliseconds\nlet throttleFunction = (func: any, delay: number) => {\n  // If setTimeout is already scheduled, no need to do anything\n  if (timerId) {\n    return;\n  }\n\n  // Schedule a setTimeout after delay seconds\n  timerId = setTimeout(() => {\n    func();\n\n    // Once setTimeout function execution is finished, timerId = undefined so that in <br>\n    // the next scroll event function execution can be scheduled by the setTimeout\n    timerId = undefined;\n  }, delay)\n}\n\n//This function takes in latitude and longitude of two location and returns the distance in Km between them as the crow flies (in km)\nlet calcDistance = (lat1: number, lon1: number, lat2: number, lon2: number) => {\n  const R: number = 6371; // km\n  let dLat: number = toRad(lat2 - lat1);\n  let dLon: number = toRad(lon2 - lon1);\n  let elat1: number = toRad(lat1);\n  let elat2: number = toRad(lat2);\n\n  let a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.sin(dLon / 2) * Math.sin(dLon / 2) * Math.cos(elat1) * Math.cos(elat2);\n  let c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  let d = R * c;\n  return d;\n}\n\n// Converts numeric degrees to radians\nlet toRad = (val: number): number => {\n  return Number(val * Math.PI / 180);\n}\n\n\n\n\n\n\nfunction deleteIconDefault() {\n  /* This code is needed to properly load the images in the Leaflet CSS */\n  delete L.Icon.Default.prototype._getIconUrl;\n  L.Icon.Default.mergeOptions({\n    iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n    iconUrl: require('leaflet/dist/images/marker-icon.png'),\n    shadowUrl: require('leaflet/dist/images/marker-shadow.png'),\n  });\n\n}\n\n\nfunction drawHeatMap(\n  configuration: any,\n  data: Array<any>,\n  delay: number = 1000,\n  setView = true,\n  animation_ix = -1) {\n  // data: Array<LatLngCount>\n  /* Data points defined as an array of LatLng objects */\n  // https://developers.google.com/maps/documentation/javascript/heatmaplayer?hl=nl\n\n  let heatmapData2 = sliceHoursfromData(configuration, data);\n  let heatmapData: { max: number; data: Array<LatLngCount> };\n  let dayIndex = getDayIndex(configuration);\n\n\n\n  if (data) {\n\n    // Set map position and zoom\n    if (setView == true) {\n      // set view\n      // to be done\n    }\n\n    // Clear existing (invisble) markers with tooltips\n    if (map_leaflet.hasLayer(venuemarkers)) {\n      venuemarkers.clearLayers();\n    }\n    // Clear existing heatmaps\n    if (map_leaflet.hasLayer(heatmapLayer)) {\n      map_leaflet.removeLayer(heatmapLayer);\n    }\n\n    heatmapLayer = new HeatmapOverlay(heatmap_config);\n\n    heatmapData = {\n      max: 100,\n      data: heatmapData2[dayIndex][0]\n    };\n    heatmapLayer.setData(heatmapData);\n\n    //heatmapLayer.setData(heatmapData);\n    heatmapLayer.addTo(map_leaflet);\n\n    // Add leaflet markers (if needeed)\n    // addVenueMarkers(data);\n    // Update map location and zoom in url params on map drag and zoom\n\n    map_leaflet.on(\"moveend\", function () {\n      function map_moveend() {\n\n        // do something when moveend\n        // here we are not doing anything.\n        let map_lat = map_leaflet.getCenter().lat.toFixed(2);\n        let map_lng = map_leaflet.getCenter().lng.toFixed(2);\n        let map_z = map_leaflet.getZoom();\n        // convert map_z to a radius\n        // The radius (m) decrease inverted with the map zoom\n        let bounds = map_leaflet.getBounds();\n        let min = bounds.getSouthWest().wrap();\n        let max = bounds.getNorthEast().wrap();\n        let radius = Math.round(1000 * calcDistance(min.lat, min.lng, max.lat, max.lng));\n\n      }\n\n      // Throttle map movement update otherwise users who move the map fast end up hitting the browser window.history.push limits\n      throttleFunction(map_moveend, 2000);\n\n    });\n    // animate\n    animate(configuration, heatmapData2[dayIndex]);\n\n  }\n\n}\n\nfunction animate(configuration: any, heatMapData: Array<[]>) {\n  let dayIndex = getDayIndex(configuration);\n\n  // build player: args-->\n  // public heatmap: the layer,\n  // public data: the overall hours data,\n  // public interval: time interval,\n  // public animationSpeed: speed,\n  // public readonly wrapperEl: querySelector Element,\n  // public playButton: If not, it is created,\n  // public isPlaying: boolean\n  player = new AnimationPlayer({\n    heatmap: heatmapLayer,\n    data: heatMapData,\n    interval: 100,\n    animationSpeed: Number(getOptionValue('animateDelay')),\n    wrapperEl: document.querySelector('.timeline-wrapper'),\n    playButton: null,\n    isPlaying: false,\n    dayTimeWindow: configuration\n  });\n  //player.play();\n\n\n}\n\n\nfunction getHours(): any {\n  return {\n    hourMin: getOptionValue(\"hour_min\"),\n    hourMax: getOptionValue(\"hour_max\")\n  }\n}\n\n\nlet getDDay = (day: string): Array<any> => {\n\n  let result = choices_days.filter((d) => {\n    return d[0] === Number(day);\n  });\n  return result.length > 0 ? result[0] : choices_days[0]; // [0, \"Sunday\"];\n\n}\n\nlet getNextDay = (day: any) => {\n\n  let ix = Number(day) === 6 ? 0 : (Number(day) + 1);\n\n  let result = choices_days.filter((d) => {\n    return d[0] === ix;\n  });\n  return result.length > 0 ? result[0] : choices_days[choices_days.length - 1]; // [6, \"Saturday\"];\n\n}\n\nlet getMinHour = (hour: string) => {\n  let result;\n  if (hour) {\n    result = choices_hours.filter((d) => {\n      return d[2] === Number(hour);\n    })[0];\n  } else {\n    result = choices_hours[0];// [0, \"6AM\", 6]\n  }\n  return result;\n\n}\nlet getMaxHour = (hour: string) => {\n  let result;\n  if (hour) {\n    result = choices_hours.filter((d) => {\n      return d[2] === Number(hour);\n    })[0];\n  } else {\n    result = choices_hours[choices_hours.length - 1]; //   [23, \"5AM\", 5]\n  }\n  return result;\n\n}\n\n\nfunction setDayTimeWindow() {\n  let dayAndHours = getDayAndHours();\n  let day = dayAndHours.day;\n  let hours = dayAndHours.hours;\n\n  if (hours.hourMin !== \"\" && hours.hourMax !== \"\") {\n    if (hour2index(Number(dayAndHours.hours.hourMax)) < hour2index(Number(dayAndHours.hours.hourMin))) {\n      alert(\"Error: The minimum hour is higher than the maximum hour.\")\n      return false;\n    }\n  }\n\n  let dDay = getDDay(day);\n  let dNextDay = getNextDay(day);\n  let dMinHour = getMinHour(hours.hourMin);\n  let dMaxHour = getMaxHour(hours.hourMax);\n\n  //  \"Monday 6AM until Tuesday 5AM\",\n  // \"{{day}} {{hour_min}} until {{next_day}} {{hour_max}}\"\n  let dayTimeWindow = {\n    \"day_window\": dDay[1] + \" \" + dMinHour[1] + \" until \" + dNextDay[1] + \" \" + dMaxHour[1],\n    \"day_window_end_int\": dNextDay[0],\n    \"day_window_end_txt\": dNextDay[1],\n    \"day_window_start_int\": dDay[0],\n    \"day_window_start_txt\": dDay[1],\n    \"time_local\": 7,\n    \"time_local_12\": \"7AM\",\n    \"time_local_index\": 1,\n    \"time_window_end\": dMaxHour[2],\n    \"time_window_end_12h\": dMaxHour[1],\n    \"time_window_end_ix\": dMaxHour[0],\n    \"time_window_start\": dMinHour[2],\n    \"time_window_start_12h\": dMinHour[1],\n    \"time_window_start_ix\": dMinHour[0]\n  };\n  return dayTimeWindow;\n\n}\n\n\nfunction getDayAndHours() {\n  return {\n    day: getOptionValue(\"daySelector\"),\n    hours: getHours()\n  }\n\n}\nfunction onHourChange(e: any) {\n  if (player) player.stop();\n  let timeWindow = setDayTimeWindow();\n  let delay: number = Number(getOptionValue('animateDelay'));\n  drawHeatMap(timeWindow, venuesData, delay);\n\n}\n\nfunction getDayIndex(configuration: any) {\n  return configuration.day_window_start_int === 0 && configuration.day_window_end_int === 6 ? 7 : configuration.day_window_start_int;\n}\nfunction getOptionValue(id: string) {\n  let select: any = document.getElementById(id);\n  var result: string = select.options[select.selectedIndex].value;\n  return result;\n\n}\nlet onDayChange = (e: any) => {\n  if (player) player.stop();\n\n  let timeWindow = setDayTimeWindow();\n  let delay: number = Number(getOptionValue('animateDelay'));\n  //we are here to pass TimeWindow\n  drawHeatMap(timeWindow, venuesData, delay);\n};\n\n\nlet onDelayChange = (e: any) => {\n  player.setAnimationSpeed(parseInt(e.currentTarget.value));\n};\n\nfunction initSelectors() {\n  let day = document.getElementById(\"daySelector\");\n  let delay = document.getElementById(\"animateDelay\");\n  let hourMin = document.getElementById(\"hour_min\");\n  let hourMax = document.getElementById(\"hour_max\");\n\n  day.addEventListener(\"change\", onDayChange, false);\n  delay.addEventListener(\"change\", onDelayChange, false);\n  hourMin.addEventListener(\"change\", onHourChange, false);\n  hourMax.addEventListener(\"change\", onHourChange, false);\n\n}\n\n\n\n\nfunction init() {\n  const config = getConfig();\n  let botsoul = \"https://botsoul.com/pruebas/heatmap/build/\";\n  deleteIconDefault();\n  drawMap();\n  initSelectors();\n\n  getJSON(config.directoryPath + \"data/samples_popular_times.json\", (err: any, data: any) => {\n    if (err !== null) {\n      console.log('Something went wrong: ' + err);\n    } else {\n      poisData = data; // original data\n      venuesData = reshapeData(data); // 7 days, 24 hours data\n      let timeWindow = setDayTimeWindow();\n      let delay: number = Number(getOptionValue('animateDelay')) || 500;\n      //we are here to pass TimeWindow\n      drawHeatMap(timeWindow, venuesData, delay);\n\n    }\n  });\n\n}\n\nwindow.onload = () => {\n  init();\n}\n","import { choices_days, choices_hours, hour2index } from './globals.service'; // starting on sunday [0]\nexport interface LatLngCount {\n  lat: number;\n  lng: number;\n  count: number\n}\n\n\n// google data: from 6 to 23, hour start at 6\n// fill the gap (0, 1, 2, 3, 4, 5,) with zeros\n//let choices_hours = [6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 0, 1, 2, 3, 4, 5];\n\n// Testing for primitives: undefined null boolean string number\nfunction isPrimitive(o: any) { return typeof o !== 'object' || null };\n\nfunction getAllDaysDataByHours(data: any) {\n  let temp: Array<Array<Array<any>>> = []; // day,hour, pois\n\n  choices_days.forEach((day: any, day_index: number) => {\n    temp.push([]); // one day\n    choices_hours.forEach((hour: any, hour_index) => {\n      temp[day_index].push([]); // 24 hours\n\n      data.forEach((d: any, data_index: number) => {\n\n        temp[day_index][hour_index].push({\n          lat: d.lat,\n          lng: d.lng,\n          count: isPrimitive(d.days[day_index]) ? 0 : d.days[day_index][hour[2]] ? d.days[day_index][hour[2]] : 0\n        });\n      });\n    });\n  });\n  return temp;\n\n}\n\n\n\nexport function reshapeData(data: any) {\n\n  // compute only data with geometry and popular time\n  let googleData = data.filter((d: any) => {\n    if (d.geometry && d.geometry.coordinates && d.geometry.coordinates[0] && d.geometry.coordinates[1] && d.properties && d.properties.goo && d.properties.goo.popular_time && d.properties.goo.popular_time.days) {\n      return true;\n    }\n  });\n\n  // return only lat, lng and days\n  let googleDays = googleData.map((d: any) => {\n    return {\n      lat: d.geometry.coordinates[1],\n      lng: d.geometry.coordinates[0],\n      days: d.properties.goo.popular_time.days\n    }\n\n  });\n  // return [ DAY [ HOURS [ POIS ] ] ] \n  // DAYS start at 0 is SUNDAY\n  // [ HOURS [ POIS ] ] is used to animate map\n  // HOURS start at 0 is 6:00am.\n  let daysData = getAllDaysDataByHours(googleDays);\n  let weekData = sumWeekDaysData(daysData);\n  let weekMediaData = mediaWeekDaysData(weekData);\n  daysData.push(weekMediaData); // 7 index is the sum of all week day and divided by 7\n  return daysData; // all 7 days week [0 Sunday - 6 Saturday] data by hours [0-23] and pois [lat, lgn, count]\n\n}\n\n\nfunction mediaWeekDaysData(hours: [][]) {\n  let day = hours.map((hour: any[]) => {\n    let pois = hour.map((poi) => {\n      poi.count = Math.round(poi.count / 7);\n      return poi;\n    })\n    return hour;\n  });\n  return day;\n}\nexport function sumWeekDaysData(data: any) {\n  let result: any = []\n\n  data.forEach((day: [][], day_index: number) => {\n    day.forEach((hour: [], hour_index: number) => {\n      if (day_index === 0) {\n        result.push([]);\n      }\n      hour.forEach((poi: any, poi_index: number) => {\n        if (day_index === 0) {\n          result[hour_index].push(\n            {\n              lat: data[day_index][hour_index][poi_index].lat,\n              lng: data[day_index][hour_index][poi_index].lng,\n              count: data[day_index][hour_index][poi_index].count\n            }\n          )\n        } else {\n          result[hour_index][poi_index].count += data[day_index][hour_index][poi_index].count\n        }\n      });\n    });\n  })\n\n  return result;\n}\n\nexport function sliceHoursfromData(configuration: any, data: Array<any>) {\n  // configuration.time_window_start_ix\n  // configuration.time_window_end_ix\n\n  let result = data.map((day) => {\n    day = day.slice(configuration.time_window_start_ix, configuration.time_window_end_ix + 1)\n    return day;\n  });\n  return result;\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.p = \"/pruebas/heatmap/build/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkwebpack_starter\"] = self[\"webpackChunkwebpack_starter\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [279], () => (__webpack_require__(151)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","choices_days","choices_hours","hour2index","hour","obj","currentFrame","this","heatmap","data","interval","animationSpeed","wrapperEl","playButton","isPlaying","dayTimeWindow","stop","init","frame","dataLen","length","innerHTML","document","createElement","onclick","play","innerText","appendChild","events","className","i","xOffset","ev","style","left","setFrame","bind","setInterval","clearInterval","snapshot","heatmapData3","max","setData","timePoints","querySelectorAll","classList","remove","add","setAnimationData","setAnimationSpeed","speed","map_leaflet","heatmap_config","gradient","latField","lngField","valueField","attribution","maxZoom","heatmapLayer","player","timerId","basemap","defaultCenter","venuemarkers","marker","venuesData","toRad","val","Number","Math","PI","drawHeatMap","configuration","delay","setView","animation_ix","heatmapData","heatmapData2","map","day","slice","time_window_start_ix","time_window_end_ix","sliceHoursfromData","dayIndex","getDayIndex","hasLayer","clearLayers","removeLayer","addTo","on","setTimeout","getCenter","lat","toFixed","lng","getZoom","lat1","lon1","lat2","lon2","dLat","dLon","elat1","elat2","a","bounds","getBounds","min","getSouthWest","wrap","getNorthEast","round","sin","cos","atan2","sqrt","func","undefined","heatMapData","AnimationPlayer","getOptionValue","querySelector","animate","setDayTimeWindow","dayAndHours","hours","hourMin","hourMax","alert","dDay","result","filter","d","getDDay","dNextDay","ix","getNextDay","dMinHour","dMaxHour","getMaxHour","onHourChange","e","timeWindow","day_window_start_int","day_window_end_int","id","select","getElementById","options","selectedIndex","value","onDayChange","onDelayChange","parseInt","currentTarget","url","location","directoryPath","config","window","href","substring","lastIndexOf","iconRetinaUrl","iconUrl","shadowUrl","fullscreenControl","center","zoom","layers","scrollWheelZoom","addEventListener","callback","xhr","XMLHttpRequest","open","responseType","onload","status","err","console","log","daysData","temp","forEach","day_index","push","hour_index","data_index","o","count","days","getAllDaysDataByHours","geometry","coordinates","properties","goo","popular_time","weekData","poi","poi_index","sumWeekDaysData","weekMediaData","reshapeData","response","send","getJSON","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","Object","keys","every","key","splice","r","n","getter","__esModule","definition","defineProperty","enumerable","get","prop","prototype","hasOwnProperty","p","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}